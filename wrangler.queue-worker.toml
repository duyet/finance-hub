# Queue Consumer Worker Configuration
# This worker processes async jobs for OCR and CSV parsing
# Deployed separately from the main Pages application

name = "finance-hub-queue-worker"
main = "./workers/queue-consumer.ts"
compatibility_date = "2024-04-05"
compatibility_flags = ["nodejs_compat"]

# Queue Consumer Binding
[[queues.producers]]
queue = "finance-hub-jobs"
binding = "QUEUE"

[[queues.consumers]]
queue = "finance-hub-jobs"
max_batch_size = 10
max_wait_time = 5

# Database Binding (same as Pages)
[[d1_databases]]
binding = "DB"
database_name = "finance-hub-prod"
database_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

# Object Storage for Receipts (same as Pages)
[[r2_buckets]]
binding = "RECEIPTS_BUCKET"
bucket_name = "finance-hub-receipts"

# AI Binding for OCR (same as Pages)
[ai]
binding = "AI"
